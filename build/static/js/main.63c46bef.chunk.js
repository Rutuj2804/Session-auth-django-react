(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{69:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a(0),r=a.n(c),s=a(7),o=a(5),i=a(12),l=a(4),u=a.n(l),p=a(9),j=a(14),b=a.n(j),d="REGISTER_SUCCESS",m="REGISTER_FAIL",h="LOGIN_SUCCESS",f="LOGIN_FAIL",O="LOGOUT_SUCCESS",x="LOGOUT_FAIL",v="AUTHENTICATED_SUCCESS",g="AUTHENTICATED_FAIL",y="DELETE_USER_SUCCESS",N="DELETE_USER_FAIL",_="LOAD_USER_PROFILE_SUCCESS",S="LOAD_USER_PROFILE_FAIL",w="UPDATE_USER_PROFILE_SUCCESS",C="UPDATE_USER_PROFILE_FAIL",k=a(18),A=a.n(k),E=function(){return function(){var e=Object(p.a)(u.a.mark((function e(t){var a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Accept:"application/json","Content-type":"application/json"}},e.prev=1,e.next=4,b.a.get("/profile/user/",a);case 4:(n=e.sent).data.error?t({type:S}):n.data.profile?t({type:_,payload:n.data}):t({type:S}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t({type:S});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},L=Object(i.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated}}),{logout:function(){return function(){var e=Object(p.a)(u.a.mark((function e(t){var a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Accept:"application/json","Content-type":"application/json","X-CSRFToken":A.a.get("csrftoken")}},n=JSON.stringify({withCredentials:!0}),e.prev=2,e.next=5,b.a.post("/accounts/logout/",n,a);case 5:e.sent.data.success?t({type:O}):t({type:x}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),t({type:x});case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}()}})((function(e){var t=e.logout,a=e.isAuthenticated,r=Object(n.jsxs)(c.Fragment,{children:[Object(n.jsx)("li",{className:"nav-item",children:Object(n.jsx)(s.c,{className:"nav-link",to:"/dashboard",children:"Dashboard"})}),Object(n.jsx)("li",{className:"nav-item",children:Object(n.jsx)("a",{className:"nav-link",onClick:t,href:"#!",children:"Logout"})})]}),o=Object(n.jsxs)(c.Fragment,{children:[Object(n.jsx)("li",{className:"nav-item",children:Object(n.jsx)(s.c,{className:"nav-link",to:"/login",children:"Login"})}),Object(n.jsx)("li",{className:"nav-item",children:Object(n.jsx)(s.c,{className:"nav-link",to:"/register",children:"Register"})})]});return Object(n.jsx)("nav",{className:"navbar navbar-expand-lg navbar-light bg-light",children:Object(n.jsxs)("div",{className:"container-fluid",children:[Object(n.jsx)(s.b,{className:"navbar-brand",to:"/",children:"Session Auth"}),Object(n.jsx)("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(n.jsx)("span",{className:"navbar-toggler-icon"})}),Object(n.jsx)("div",{className:"collapse navbar-collapse",id:"navbarNav",children:Object(n.jsxs)("ul",{className:"navbar-nav",children:[Object(n.jsx)("li",{className:"nav-item",children:Object(n.jsx)(s.c,{className:"nav-link",to:"/",children:"Home"})}),a?r:o]})})]})})}));var U=Object(i.b)(null,{checkAuthenticated:function(){return function(){var e=Object(p.a)(u.a.mark((function e(t){var a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Accept:"application/json","Content-type":"application/json"}},e.prev=1,e.next=4,b.a.get("/accounts/authenticated/",a);case 4:"error"===(n=e.sent).data.isAuthenticated||n.data.error?t({type:g,payload:!1}):"success"===n.data.isAuthenticated?t({type:v,payload:!0}):t({type:g,payload:!1}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t({type:g,payload:!1});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},load_user:E})((function(e){var t=e.children,a=e.checkAuthenticated,r=e.load_user;return Object(c.useEffect)((function(){a(),r()}),[a,r]),Object(n.jsxs)(c.Fragment,{children:[Object(n.jsx)(L,{}),t]})}));var R=function(){return Object(n.jsx)("div",{className:"container",children:Object(n.jsxs)("div",{className:"mt-5 p-5 bg-light",children:[Object(n.jsx)("h1",{className:"display-4",children:"Welcome to Session Auth"}),Object(n.jsx)("p",{className:"lead",children:"This is a wonderful application with session authentication in React and Django."}),Object(n.jsx)("hr",{className:"my-4"}),Object(n.jsx)("p",{children:"Click the button below to log in."}),Object(n.jsx)(s.b,{className:"btn btn-primary btn-large",to:"/login",children:"Login"})]})})},F=a(17),T=a(3),I=a(15),D=function(){var e=Object(c.useState)(""),t=Object(I.a)(e,2),a=t[0],r=t[1];return Object(c.useEffect)((function(){(function(){var e=Object(p.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.a.get("/accounts/csrf_cookie/");case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}})()(),r(function(e){var t=null;if(document.cookie&&""!==document.cookie)for(var a=document.cookie.split(";"),n=0;n<a.length;n++){var c=a[n].trim();if(c.substring(0,e.length+1)===e+"="){t=decodeURIComponent(c.substring(e.length+1));break}}return t}("csrftoken"))}),[]),Object(n.jsx)("input",{type:"hidden",name:"csrfmiddlewaretoken",value:a})};var P=Object(i.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated}}),{register:function(e,t,a){return function(){var n=Object(p.a)(u.a.mark((function n(c){var r,s;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r={headers:{Accept:"application/json","Content-type":"application/json","X-CSRFToken":A.a.get("csrftoken")}},s=JSON.stringify({username:e,password:t,re_password:a}),n.prev=2,n.next=5,b.a.post("/accounts/register/",s,r);case 5:n.sent.data.error?c({type:m}):c({type:d}),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(2),c({type:m});case 12:case"end":return n.stop()}}),n,null,[[2,9]])})));return function(e){return n.apply(this,arguments)}}()}})((function(e){var t=e.register,a=e.isAuthenticated,r=Object(c.useState)({username:"",password:"",re_password:""}),i=Object(I.a)(r,2),l=i[0],u=i[1],p=Object(c.useState)(!1),j=Object(I.a)(p,2),b=j[0],d=j[1],m=l.username,h=l.password,f=l.re_password,O=function(e){u(Object(T.a)(Object(T.a)({},l),{},Object(F.a)({},e.target.name,e.target.value)))};return a?Object(n.jsx)(o.a,{to:"/dashboard"}):b?Object(n.jsx)(o.a,{to:"/login"}):Object(n.jsxs)("div",{className:"container mt-5",children:[Object(n.jsx)("h1",{children:"Register for an account"}),Object(n.jsx)("p",{children:"Create an account with our session auth application"}),Object(n.jsxs)("form",{onSubmit:function(e){return function(e){e.preventDefault(),h===f&&(t(m,h,f),d(!0))}(e)},children:[Object(n.jsx)(D,{}),Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{className:"form-label",children:"Username"}),Object(n.jsx)("input",{className:"form-control",type:"text",placeholder:"Username*",name:"username",onChange:function(e){return O(e)},value:m,required:!0})]}),Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{className:"form-label mt-3",children:"Password"}),Object(n.jsx)("input",{className:"form-control",type:"password",placeholder:"Password*",name:"password",onChange:function(e){return O(e)},value:h,minLength:"6",required:!0})]}),Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{className:"form-label mt-3",children:"Confirm Password"}),Object(n.jsx)("input",{className:"form-control",type:"password",placeholder:"Confirm Password*",name:"re_password",onChange:function(e){return O(e)},value:f,minLength:"6",required:!0})]}),Object(n.jsx)("button",{className:"btn btn-primary mt-3",type:"submit",children:"Register"})]}),Object(n.jsxs)("p",{className:"mt-3",children:["Already have an account? ",Object(n.jsx)(s.b,{to:"/login",children:"Sign in"})]})]})}));var J=Object(i.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated}}),{login:function(e,t){return function(){var a=Object(p.a)(u.a.mark((function a(n){var c,r;return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return c={headers:{Accept:"application/json","Content-type":"application/json","X-CSRFToken":A.a.get("csrftoken")}},r=JSON.stringify({username:e,password:t}),a.prev=2,a.next=5,b.a.post("/accounts/login/",r,c);case 5:a.sent.data.success?(n({type:h}),n(E())):n({type:f}),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(2),n({type:f});case 12:case"end":return a.stop()}}),a,null,[[2,9]])})));return function(e){return a.apply(this,arguments)}}()}})((function(e){var t=e.login,a=e.isAuthenticated,r=Object(c.useState)({username:"",password:""}),i=Object(I.a)(r,2),l=i[0],u=i[1],p=l.username,j=l.password,b=function(e){u(Object(T.a)(Object(T.a)({},l),{},Object(F.a)({},e.target.name,e.target.value)))};return a?Object(n.jsx)(o.a,{to:"/dashboard"}):Object(n.jsxs)("div",{className:"container mt-5",children:[Object(n.jsx)("h1",{children:"Sign In"}),Object(n.jsx)("p",{children:"Sign in to your session auth account"}),Object(n.jsxs)("form",{onSubmit:function(e){return function(e){e.preventDefault(),t(p,j)}(e)},children:[Object(n.jsx)(D,{}),Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{className:"form-label",children:"Username"}),Object(n.jsx)("input",{className:"form-control",type:"text",placeholder:"Username*",name:"username",onChange:function(e){return b(e)},value:p,required:!0})]}),Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{className:"form-label mt-3",children:"Password"}),Object(n.jsx)("input",{className:"form-control",type:"password",placeholder:"Password*",name:"password",onChange:function(e){return b(e)},value:j,minLength:"6",required:!0})]}),Object(n.jsx)("button",{className:"btn btn-primary mt-3",type:"submit",children:"Login"})]}),Object(n.jsxs)("p",{className:"mt-3",children:["Don't have an account? ",Object(n.jsx)(s.b,{to:"/register",children:"Register"})]})]})})),G=Object(i.b)((function(e){return{first_name_global:e.first_name,last_name_global:e.last_name,phone_global:e.phone,city_global:e.city}}),{update_profile:function(e,t,a,n){return function(){var c=Object(p.a)(u.a.mark((function c(r){var s,o,i;return u.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return s={headers:{Accept:"application/json","Content-type":"application/json","X-CSRFToken":A.a.get("csrftoken")}},o=JSON.stringify({withCredentials:!0,first_name:e,last_name:t,phone:a,city:n}),c.prev=2,c.next=5,b.a.put("/profile/update/",o,s);case 5:(i=c.sent).data.error?r({type:C}):i.data.profile&&i.data.username?r({type:w,payload:i.data}):r({type:C}),c.next=12;break;case 9:c.prev=9,c.t0=c.catch(2),r({type:C});case 12:case"end":return c.stop()}}),c,null,[[2,9]])})));return function(e){return c.apply(this,arguments)}}()},delete_account:function(){return function(){var e=Object(p.a)(u.a.mark((function e(t){var a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Accept:"application/json","Content-Type":"application/json","X-CSRFToken":A.a.get("csrftoken")}},n=JSON.stringify({withCredentials:!0}),e.prev=2,e.next=5,b.a.delete("/accounts/delete/",n,a);case 5:e.sent.data.success?t({type:y}):t({type:N}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),t({type:N});case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}()}})((function(e){var t=e.update_profile,a=e.first_name_global,r=e.last_name_global,s=e.phone_global,o=e.city_global,i=e.delete_account,l=Object(c.useState)(!1),j=Object(I.a)(l,2),b=j[0],d=j[1],m=Object(c.useState)({first_name:"",last_name:"",phone:"",city:""}),h=Object(I.a)(m,2),f=h[0],O=h[1],x=f.first_name,v=f.last_name,g=f.phone,y=f.city;Object(c.useEffect)((function(){O({first_name:a,last_name:r,phone:s,city:o})}),[a]);var N=function(e){O(Object(T.a)(Object(T.a)({},f),{},Object(F.a)({},e.target.name,e.target.value)))};return Object(n.jsxs)("div",{className:"container",children:[Object(n.jsx)("h1",{className:"mt-3",children:"Welcome To User Dashboard"}),Object(n.jsx)("p",{className:"mt-3 mb-3",children:"Update your user profile below:"}),Object(n.jsxs)("form",{onSubmit:function(e){return function(e){e.preventDefault(),function(){var e=Object(p.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(x,v,g,y);case 2:d(!b);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}(e)},children:[Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{className:"form-label",htmlFor:"first_name",children:"First Name"}),Object(n.jsx)("input",{className:"form-control",type:"text",name:"first_name",value:x,placeholder:"".concat(a),onChange:function(e){return N(e)}})]}),Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{className:"form-label mt-3",htmlFor:"last_name",children:"Last Name"}),Object(n.jsx)("input",{className:"form-control",type:"text",name:"last_name",value:v,placeholder:"".concat(r),onChange:function(e){return N(e)}})]}),Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{className:"form-label mt-3",htmlFor:"phone",children:"Phone"}),Object(n.jsx)("input",{className:"form-control",type:"text",name:"phone",value:g,placeholder:"".concat(s),onChange:function(e){return N(e)}})]}),Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{className:"form-label mt-3",htmlFor:"city",children:"City"}),Object(n.jsx)("input",{className:"form-control",type:"text",name:"city",value:y,placeholder:"".concat(o),onChange:function(e){return N(e)}})]}),Object(n.jsx)("button",{className:"btn btn-primary mt-3",type:"submit",children:"Update"})]}),Object(n.jsx)("p",{className:"mt-3",children:"Click the button below to delete your user accout:"}),Object(n.jsx)("a",{className:"btn btn-danger",href:"#!",onClick:i,children:"Delete Account"})]})})),q=a(16),X=a(38),H=a(39),W={isAuthenticated:null},M={username:"",first_name:"",last_name:"",phone:"",city:""},B=Object(q.combineReducers)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case v:case g:return Object(T.a)(Object(T.a)({},e),{},{isAuthenticated:n});case d:return Object(T.a)(Object(T.a)({},e),{},{isAuthenticated:!1});case h:return Object(T.a)(Object(T.a)({},e),{},{isAuthenticated:!0});case O:case y:return Object(T.a)(Object(T.a)({},e),{},{isAuthenticated:!1});case m:case f:case x:case N:default:return e}},profile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case _:case w:return Object(T.a)(Object(T.a)({},e),{},{username:n.username,first_name:n.profile.first_name,last_name:n.profile.last_name,phone:n.profile.phone,city:n.profile.city});case S:return Object(T.a)(Object(T.a)({},e),{},{username:"",first_name:"",last_name:"",phone:"",city:""});case C:default:return e}}}),z=[H.a],K=Object(q.createStore)(B,{},Object(X.composeWithDevTools)(q.applyMiddleware.apply(void 0,z))),Q=function(){return Object(n.jsx)(i.a,{store:K,children:Object(n.jsx)(s.a,{children:Object(n.jsxs)(U,{children:[Object(n.jsx)(o.b,{exact:!0,path:"/",component:R}),Object(n.jsx)(o.b,{exact:!0,path:"/register",component:P}),Object(n.jsx)(o.b,{exact:!0,path:"/login",component:J}),Object(n.jsx)(o.b,{exact:!0,path:"/dashboard",component:G})]})})})},V=a(22);a.n(V).a.render(Object(n.jsx)(r.a.StrictMode,{children:Object(n.jsx)(Q,{})}),document.getElementById("root"))}},[[69,1,2]]]);
//# sourceMappingURL=main.63c46bef.chunk.js.map